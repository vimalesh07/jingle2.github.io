<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Special Gift For You</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Outfit:wght@300;400;600&display=swap"
        rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/gift.css">
    <link rel="stylesheet" href="css/animation.css">
    <link rel="stylesheet" href="css/snowfall.css">
    <link rel="stylesheet" href="css/mobile.css">
</head>

<body>
    <canvas id="snow-canvas"></canvas>

    <div class="app-container">
        <main class="gift-view" id="main-stage">

            <!-- Loading State -->
            <div id="loading" class="animate-pulse">
                <p>Looking for your gift in the snow... ‚ùÑÔ∏è</p>
            </div>

            <!-- Error State -->
            <div id="error-msg" style="display: none; color: #ff6b6b;">
                <h1>Oh no!</h1>
                <p>We couldn't find this gift. It might have gotten lost in the blizzard.</p>
            </div>

            <!-- Scene 1: The Box -->
            <div id="scene-box" style="display: none;">
                <h1 style="font-family: var(--font-display); margin-bottom: 2rem;">For <span
                        id="receiver-name">You</span></h1>
                <p style="margin-bottom: 2rem; opacity: 0.8;">Tap to open</p>
                <div class="gift-box animate-float" id="gift-box-trigger">
                    <span style="font-size: 4rem;">üéÅ</span>
                </div>
            </div>

            <!-- Scene 2: The Reveal (Content) -->
            <div id="scene-reveal" style="display: none; width: 100%; text-align: left; padding-bottom: 3rem;">

                <!-- Sender -->
                <div class="reveal-item" id="reveal-sender">
                    <p style="text-align: center; color: var(--color-accent); font-size: 0.9rem; margin-bottom: 1rem;">
                        From <span id="sender-name" style="font-weight: bold;"></span></p>
                </div>

                <!-- Message -->
                <div class="reveal-item" id="reveal-message">
                    <div
                        style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: var(--radius-md); border-left: 3px solid var(--color-accent); margin-bottom: 2rem;">
                        <p id="message-text" style="font-size: 1.1rem; line-height: 1.6; white-space: pre-wrap;"></p>
                    </div>
                </div>

                <!-- Voice -->
                <div class="reveal-item" id="reveal-voice" style="margin-bottom: 2rem; text-align: center;">
                    <p style="margin-bottom: 0.5rem; opacity: 0.7; font-size: 0.9rem;">Voice Message</p>
                    <audio id="voice-player" controls style="width: 100%; opacity: 0.9;"></audio>
                </div>

                <!-- Photo -->
                <div class="reveal-item" id="reveal-photo">
                    <div id="photo-container" style="display: flex; flex-direction: column; gap: 1rem;">
                        <!-- Photos injected here -->
                    </div>
                </div>

                <div style="margin-top: 4rem; text-align: center; opacity: 0.5;">
                    <p style="font-size: 0.8rem;">Merry Christmas</p>
                </div>
            </div>

        </main>
    </div>

    <!-- Logic -->
    <script type="module" src="js/snowfall.js"></script>
    <script type="module" src="js/opengift.js"></script>
</body>

</html>